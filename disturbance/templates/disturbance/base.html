{% extends "webtemplate_dbca/base_b5_auth_session.html" %}

{% load static %}
{% load django_vite %}

{% load users %}
{% load utils %}
{% is_internal as is_internal_login %}
{% is_disturbance_admin as is_disturbance_admin_user %}
{% is_apiary_admin as is_apiary_admin_user %}
{% system_maintenance_due as system_maintenance_due %}
{% system_name_short as short_name %}
{% dept_name as department_name %}
{% system_name as system_name %}
{% system_name_short as system_name_short %}
{% support_email as support_email %}

{% block header_top_menu %}
{% endblock %}

{% block extra_css %}
  <link rel="icon" type="image/png" href="/static/favicon.ico" />

  <link rel="stylesheet" href="{% static 'disturbance/css/base.css' %}?v={{ GIT_COMMIT_HASH }}" />
{% endblock extra_css %}

{% block extra_js %}
    {% vite_hmr_client app='default' %}
{% endblock extra_js %}

{% block custom_js %}
    <script language="javascript">
        var env = {
            "kb_server_url": "{{ KB_SERVER_URL }}",
        }
    </script>
    {% vite_asset vue3_entry_script app='default' %}
{% endblock custom_js %}

{% block menu_items_left_brand %}
  <div class="navbar-nav">
    <div class="nav-item">
      <!-- <a class="nav-link{% if request.path == '/' %} active{% endif %}" href="/external/"><img src="/static/img/pwl_icon.png" />Home</a> -->
      <a class="nav-link{% if request.path == '/' %} active{% endif %}" href="{% url 'home' %}"><img src="{% static 'disturbance/img/dpaw_small.png' %}">{% if is_internal_login %}{% if TEMPLATE_GROUP == 'apiary' %}Applications{% else %}Proposals{% endif %}{% else %}Home {% endif %}</a>
    </div>
  </div>
{% endblock menu_items_left_brand%}

{% block menu_items2_right %}
  {% if request.user.is_authenticated %}
    
  {% else %}
    <a href="ssologin/" class="btn btn-primary btn-sm">Login</a>
  {% endif %}
{% endblock menu_items2_right %}

{% block menu_spacer %}
 <BR>
{% endblock menu_spacer %}

{% block messages %}
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                {% for message in messages %}
                    <div class="alert 
                        {% if message.tags == 'error' %}alert-danger
                        {% elif message.tags == 'warning' %}alert-warning
                        {% elif message.tags == 'success' %}alert-success
                        {% else %}alert-info{% endif %}
                        alert-dismissible fade show" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&#215;</button>
                        {{ message|safe }}
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
<!-- dash/index.html inserts <div id="app"></div> tag here, which is replaced by the Vue components >-->
{% endblock content %}

{% block footer %}
  {% application_version as application_version %}
  {% support_email as support_email %}
  {% dept_support_phone as dept_support_phone %}
  {% comment %} <footer class="footer fixed-bottom mt-3">
    <div class="container-fluid border-top py-2 bg-light text-secondary">
      <div class="row">
        <div class="col">
          <small class="float-start">Version:{% application_version %}</small>
        </div>
        <div class="col">
          <small>Support: <a href="mailto:{% support_email %}">{% support_email %}</a> | <a href="tel:{% dept_support_phone %}">{% dept_support_phone %}</a></small>
        </div>
        <div class="col">
          <small class="float-end">&copy; {% dept_name %}</small>
        </div>
      </div>
    </div>
  </footer> {% endcomment %}
{% endblock footer %}
